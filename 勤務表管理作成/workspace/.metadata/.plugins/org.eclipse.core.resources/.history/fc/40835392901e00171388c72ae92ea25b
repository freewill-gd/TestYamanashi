<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="test">
  <select id="selectT_roster" resultType="map">

SELECT
	  COLUMNS.ATTNUM
	, CASE ATTNOTNULL WHEN 't' THEN 'â—‹' ELSE '' END AS NOTNULL
	, TABLES.RELNAME AS TABLE_NAME
	, COLUMNS.ATTNAME AS COLUMN_NAME
	, FORMAT_TYPE(COLUMNS.ATTTYPID, COLUMNS.ATTTYPMOD)
	, TABLE_COMMENT.DESCRIPTION AS TABLE_COMMENT
	, COMMENT.DESCRIPTION AS COLUMN_COMMENT
FROM
	PG_STAT_ALL_TABLES TABLES
INNER JOIN
	PG_ATTRIBUTE COLUMNS
ON
	COLUMNS.ATTRELID = TABLES.RELID
	AND COLUMNS.ATTNUM > 0
LEFT JOIN
	PG_DESCRIPTION TABLE_COMMENT
ON
	TABLE_COMMENT.OBJOID = COLUMNS.ATTRELID
	AND TABLE_COMMENT.OBJSUBID = 0
LEFT JOIN
	PG_DESCRIPTION COMMENT
ON
	COMMENT.OBJOID = COLUMNS.ATTRELID
	AND COMMENT.OBJSUBID = COLUMNS.ATTNUM
WHERE
	TABLES.SCHEMANAME = 'public'
	/* AND TABLES.RELNAME = #{table} */
ORDER BY
	  TABLE_NAME
	, COLUMNS.ATTNUM


  </select>
</mapper>