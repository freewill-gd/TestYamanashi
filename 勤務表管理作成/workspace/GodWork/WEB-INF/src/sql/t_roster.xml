<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="test">

<resultMap id="t_rosterResultMap" type="map">
	<result property="user_id" column="user_id" javaType="String"/>
	<result property="work_date" column="work_date" javaType="String"/>
	<result property="weekday" column="weekday" javaType="String"/>
	<result property="work_date_key" column="work_date_key" javaType="String"/>
	<result property="holiday_flg" column="holiday_flg" javaType="String"/>
	<result property="work_kind" column="work_kind" javaType="String"/>
	<result property="start_time" column="start_time" javaType="String"/>
	<result property="end_time" column="end_time" javaType="String"/>
	<result property="break_time" column="break_time" javaType="String"/>
	<result property="over_time" column="over_time" javaType="String"/>
	<result property="late_night_over_time" column="late_night_over_time" javaType="String"/>
	<result property="holiday_over_time" column="holiday_over_time" javaType="String"/>
	<result property="holiday_late_night_over_time" column="holiday_late_night_over_time" javaType="String"/>
	<result property="remarks" column="remarks" javaType="String"/>
	<result property="insert_date" column="insert_date" javaType="String"/>
	<result property="insert_user_id" column="insert_user_id" javaType="String"/>
	<result property="update_date" column="update_date" javaType="String"/>
	<result property="update_user_id" column="update_user_id" javaType="String"/>
	<result property="enable_flg" column="enable_flg" javaType="String"/>
</resultMap>

  <select id="selectT_roster" resultMap="t_rosterResultMap">
<![CDATA[
SELECT user_id
 ,  TO_CHAR(work_date, 'DD') AS work_date
 ,  fn_weekday(work_date) AS weekday
 ,  work_date AS work_date_key
 ,  holiday_flg
 ,  work_kind
 ,  TO_CHAR(start_time, 'HH24:MI') AS start_time
 ,  TO_CHAR(end_time, 'HH24:MI') AS end_time
 ,  fn_minute_to_string(break_time) AS break_time
 ,  fn_minute_to_string(over_time) AS over_time
 ,  fn_minute_to_string(late_night_over_time) AS late_night_over_time
 ,  fn_minute_to_string(holiday_over_time) AS holiday_over_time
 ,  fn_minute_to_string(holiday_late_night_over_time) AS holiday_late_night_over_time
 ,  remarks
 ,  insert_date
 ,  insert_user_id
 ,  update_date
 ,  update_user_id
 ,  enable_flg
FROM
  t_roster
WHERE
 work_date >= TO_DATE(#{start}, 'YYYYMM')
 AND work_date < TO_DATE(#{end}, 'YYYYMM')
ORDER BY
  work_date
]]>

  </select>
</mapper>